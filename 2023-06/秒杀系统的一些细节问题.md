## 参考博客
- [秒杀系统优化方案（下）吐血整理](https://www.cnblogs.com/xiangkejin/p/9351501.html)

## 简要概括

核心要素
- 前后端限流: 前端随机丢弃、验证码、限制点击频率；后端接口限流
- 防作弊：下发token等，同用户限流、同ip限流等
- 预热：前端静态数据CDN，后端库存缓存预热等
- 快速失败：token无效快速失败，重复秒杀快速失败，redis库存不足快速失败
- 超卖：可能出现并发问题导致超卖，需要在更新数据库时使用乐观锁，update的SQL需要增加库存判断
- 少卖：可能会出现缓存和数据库中数据不一致的情况，缓存中已扣减，但数据库中因为部分原因未成功，导致缓存中少于真实库存，用户请求被拦截，通过起初Redis配置库存，设置一个比真实库存略大的值，或者设置一个定时保持缓存数据库一致的任务（但感觉不是很有必要，在这个场景下数据不用保证完全一致）
- 异步处理，解耦削峰。更新库存后，丢入消息队列中处理订单等相关信息，前端通过轮训获取秒杀状态和进度信息等